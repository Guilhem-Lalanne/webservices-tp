/*
 * Project setup
 *
 * @author : Guilhem Lalanne
 *
 */

Bundle creation :

$ php bin/console generate:bundle

It did not work properly, I had to fix composer.json, and add manually the bundle.
(see https://stackoverflow.com/questions/45242838/symfony-3-bundle-creation-always-throws-edit-the-composer-json-file)

And then, reload autoload :
$ composer dump-autoload


DB creation :

$ php bin/console doctrine:database:create


Entity creation :

$ php bin/console doctrine:generate:entity
With isoCode, name, country, and rate.

TODO : create entity for configuration (base currency, date ...)

$ php bin/console doctrine:schema:update --dump-sql
$ php bin/console doctrine:schema:update --force


Fixture :

Install FixtureBundle and add it to composer.json :
$ composer require --dev doctrine/doctrine-fixtures-bundle

Note : I had to change version to 2.* in composer.json and then run composer update, because of a bug in 3.*

Load data :
$ php bin/console doctrine:fixtures:load


JSON serializer (JMS-Serializer) :

We need a bundle to handle the conversion from returned list of objects from the database, to json.
The json should be returned as response.
This is possible with JSM-Serializer. To install it, type :
$ composer require jms/serializer-bundle

Then, verify that composer contains a line with '"jms/serializer-bundle": "^2.3"', or add it.
Verify that AppKernel.php contains the bundle 'new JMS\SerializerBundle\JMSSerializerBundle(),'.
Uncomment the 'serializer' line in config.yml.
